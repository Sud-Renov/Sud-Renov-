<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Admin Planning</title>
<style>
  body { font-family: Arial, sans-serif; display:flex; gap:20px; margin:20px; }
  .sidebar { width:220px; }
  .chip { background:#2563eb; color:#fff; padding:8px 12px; margin:5px 0; border-radius:6px; cursor:grab; display:flex; justify-content:space-between; align-items:center; }
  .chip:active { cursor:grabbing; }
  .site { border:1px solid #ccc; border-radius:8px; padding:10px; margin-bottom:15px; background:#f9fafb; }
  .droppable { min-height:40px; border:2px dashed #60a5fa; padding:8px; border-radius:6px; margin-top:8px; }
  .droppable.dragover { background:#dbeafe; }
  .tag { background:#93c5fd; border-radius:999px; padding:4px 8px; margin:4px; display:inline-block; }
  .removeBtn { margin-left:6px; background:transparent; border:none; cursor:pointer; color:red; font-weight:bold; }
  .editBtn { margin-left:6px; background:transparent; border:none; cursor:pointer; color:#000; font-weight:bold; }
  button { background:#2563eb; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; margin-top:5px; }
  button:hover { background:#1e40af; }
</style>
</head>
<body>

<div class="sidebar">
  <h3>Ouvriers</h3>
  <input id="workerName" placeholder="Nom de l'ouvrier">
  <button type="button" onclick="addWorker()">Ajouter</button>
  <div id="workersList"></div>

  <h3>T√¢ches</h3>
  <input id="taskName" placeholder="Nom de la t√¢che">
  <button type="button" onclick="addTask()">Ajouter</button>
  <div id="tasksList"></div>

  <h3>JSON</h3>
  <button type="button" onclick="importJSON()">üìÇ Importer JSON</button>
  <button type="button" onclick="exportJSON()">‚¨áÔ∏è Exporter JSON</button>
</div>

<div class="main">
  <h2>Chantiers du jour</h2>
  <input id="siteTitleFr" placeholder="Titre (FR)">
  <input id="siteAddressFr" placeholder="Adresse (FR)">
  <input id="siteStart" placeholder="Heure de d√©but (ex: 08:00)">
  <input id="sitePhoto" placeholder="Chemin photo (ex: images/chantier.jpg)">
  <button id="addSiteBtn" type="button" onclick="addSite()">Ajouter chantier</button>

  <div id="sitesGrid"></div>
</div>

<script>
let workers = [];
let tasks = [];
let sites = [];

function makeChip(type, name) {
  const div = document.createElement("div");
  div.className = "chip";
  div.textContent = (type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ") + name;
  div.draggable = true;
  div.dataset.type = type;
  div.dataset.name = name;
  div.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", JSON.stringify({type, name}));
  });

  // üîπ Bouton √©diter ouvrier/t√¢che
  const editBtn = document.createElement("button");
  editBtn.textContent = "‚úèÔ∏è";
  editBtn.className = "editBtn";
  editBtn.onclick = () => {
    const newName = prompt("Nouveau nom :", div.dataset.name);
    if (newName) {
      div.textContent = (type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ") + newName;
      div.dataset.name = newName;
      div.appendChild(editBtn);
    }
  };
  div.appendChild(editBtn);

  return div;
}

function addWorker() {
  const input = document.getElementById("workerName");
  const name = input.value.trim();
  if (!name) return;
  workers.push(name);
  document.getElementById("workersList").appendChild(makeChip("ouvrier", name));
  input.value="";
}

function addTask() {
  const input = document.getElementById("taskName");
  const name = input.value.trim();
  if (!name) return;
  tasks.push(name);
  document.getElementById("tasksList").appendChild(makeChip("tache", name));
  input.value="";
}

function addSite() {
  const titleFr = document.getElementById("siteTitleFr").value.trim();
  const addressFr = document.getElementById("siteAddressFr").value.trim();
  const start = document.getElementById("siteStart").value.trim();
  const photo = document.getElementById("sitePhoto").value.trim();

  if (!titleFr || !addressFr) {
    alert("Merci de remplir au minimum Titre (FR) et Adresse (FR).);
    return;
  }

  const id = "site" + Math.random().toString(36).slice(2,9);
  sites.push({
    id,
    title: { fr: titleFr },
    address: { fr: addressFr },
    start,
    photo,
    crew: [],
    status: "ok"
  });

  renderSites();

  document.getElementById("siteTitleFr").value="";
  document.getElementById("siteAddressFr").value="";
  document.getElementById("siteStart").value="";
  document.getElementById("sitePhoto").value="";
}

function renderSites() {
  const grid = document.getElementById("sitesGrid");
  grid.innerHTML="";
  sites.forEach(site=>{
    const card=document.createElement("div");
    card.className="site";
    card.innerHTML=`
      <strong>${site.title.fr}</strong><br>
      üìç ${site.address.fr}<br>
      üïó ${site.start || ""}<br>
      <div class="droppable" data-id="${site.id}"></div>
    `;
    const dropzone=card.querySelector(".droppable");
    dropzone.addEventListener("dragover", e=>{e.preventDefault();dropzone.classList.add("dragover");});
    dropzone.addEventListener("dragleave", ()=>dropzone.classList.remove("dragover"));
    dropzone.addEventListener("drop", e=>{
      e.preventDefault();
      dropzone.classList.remove("dragover");
      const data=JSON.parse(e.dataTransfer.getData("text/plain"));

      // V√©rifier si d√©j√† affect√© ailleurs
      let chantierTrouve = null;
      let villeTrouvee = null;
      sites.forEach(s => {
        if (s.id !== site.id) {
          s.crew.forEach(c => {
            if (c.type === data.type && c.name === data.name) {
              chantierTrouve = s.title.fr;
              villeTrouvee = s.address.fr;
            }
          });
        }
      });

      if (chantierTrouve) {
        alert(`‚ö†Ô∏è Attention, "${data.name}" est d√©j√† affect√© au chantier "${chantierTrouve}" √† "${villeTrouvee}" !`);
        return;
      }

      site.crew.push(data);
      renderSites();
    });

    // üîπ Affichage des ouvriers/t√¢ches avec croix de suppression
    site.crew.forEach((c, idx)=>{
      const span=document.createElement("span");
      span.className="tag";
      span.textContent=(c.type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ")+c.name;

      const removeBtn=document.createElement("button");
      removeBtn.textContent="‚ùå";
      removeBtn.className="removeBtn";
      removeBtn.onclick=()=>{
        site.crew.splice(idx,1);
        renderSites();
      };

      span.appendChild(removeBtn);
      dropzone.appendChild(span);
    });

    // üîπ Bouton √©diter chantier
    const editBtn = document.createElement("button");
    editBtn.textContent = "‚úèÔ∏è √âditer chantier";
    editBtn.onclick = () => {
      const newTitle = prompt("Nouveau titre :", site.title.fr);
      const newAddress = prompt("Nouvelle adresse :", site.address.fr);
      const newStart = prompt("Nouvelle heure :", site.start);
      const newPhoto = prompt("Nouvelle photo :", site.photo);

      if (newTitle) site.title.fr = newTitle;
      if (newAddress) site.address.fr = newAddress;
      if (newStart) site.start = newStart;
      if (newPhoto) site.photo = newPhoto;

      renderSites();
    };
    card.appendChild(editBtn);

    grid.appendChild(card);
  });
}

function exportJSON() {
  const json=JSON.stringify(sites,null,2);
  const blob=new Blob([json],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download = "sites.json";
  a.click();
}

function importJSON() {
  const input=document.createElement("input");
  input.type="file";
  input.accept="application/json";
  input.onchange=()=>{
    const file=input.files[0];
    const reader=new FileReader();
    reader.onload=e=>{
      try {
        const data=JSON.parse(e.target.result);
        if (Array.isArray(data)) {
          sites=data;
          renderSites();
        } else {
          alert("Fichier JSON invalide.");
        }
      } catch {
        alert("Erreur lors de la lecture du fichier JSON.");
      }
    };
    reader.readAsText(file);
  };
  input.click();
}

renderSites();
</script>

</body>
</html>
```Parfait Nicolas üëå, voici ton **[admin.html](https://admin.html) complet corrig√©** avec le bouton **Importer JSON** qui refonctionne correctement, et les boutons ‚úèÔ∏è pour √©diter chantiers, ouvriers et t√¢ches.

---

## üîπ Code complet [`admin.html`](https://admin.html)

```html
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Admin Planning</title>
<style>
  body { font-family: Arial, sans-serif; display:flex; gap:20px; margin:20px; }
  .sidebar { width:220px; }
  .chip { background:#2563eb; color:#fff; padding:8px 12px; margin:5px 0; border-radius:6px; cursor:grab; display:flex; justify-content:space-between; align-items:center; }
  .chip:active { cursor:grabbing; }
  .site { border:1px solid #ccc; border-radius:8px; padding:10px; margin-bottom:15px; background:#f9fafb; }
  .droppable { min-height:40px; border:2px dashed #60a5fa; padding:8px; border-radius:6px; margin-top:8px; }
  .droppable.dragover { background:#dbeafe; }
  .tag { background:#93c5fd; border-radius:999px; padding:4px 8px; margin:4px; display:inline-block; }
  .removeBtn { margin-left:6px; background:transparent; border:none; cursor:pointer; color:red; font-weight:bold; }
  .editBtn { margin-left:6px; background:transparent; border:none; cursor:pointer; color:#000; font-weight:bold; }
  button { background:#2563eb; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; margin-top:5px; }
  button:hover { background:#1e40af; }
</style>
</head>
<body>

<div class="sidebar">
  <h3>Ouvriers</h3>
  <input id="workerName" placeholder="Nom de l'ouvrier">
  <button type="button" onclick="addWorker()">Ajouter</button>
  <div id="workersList"></div>

  <h3>T√¢ches</h3>
  <input id="taskName" placeholder="Nom de la t√¢che">
  <button type="button" onclick="addTask()">Ajouter</button>
  <div id="tasksList"></div>

  <h3>JSON</h3>
  <button type="button" onclick="importJSON()">üìÇ Importer JSON</button>
  <button type="button" onclick="exportJSON()">‚¨áÔ∏è Exporter JSON</button>
</div>

<div class="main">
  <h2>Chantiers du jour</h2>
  <input id="siteTitleFr" placeholder="Titre (FR)">
  <input id="siteAddressFr" placeholder="Adresse (FR)">
  <input id="siteStart" placeholder="Heure de d√©but (ex: 08:00)">
  <input id="sitePhoto" placeholder="Chemin photo (ex: images/chantier.jpg)">
  <button id="addSiteBtn" type="button" onclick="addSite()">Ajouter chantier</button>

  <div id="sitesGrid"></div>
</div>

<script>
let workers = [];
let tasks = [];
let sites = [];

function makeChip(type, name) {
  const div = document.createElement("div");
  div.className = "chip";
  div.textContent = (type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ") + name;
  div.draggable = true;
  div.dataset.type = type;
  div.dataset.name = name;
  div.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", JSON.stringify({type, name}));
  });

  // üîπ Bouton √©diter ouvrier/t√¢che
  const editBtn = document.createElement("button");
  editBtn.textContent = "‚úèÔ∏è";
  editBtn.className = "editBtn";
  editBtn.onclick = () => {
    const newName = prompt("Nouveau nom :", div.dataset.name);
    if (newName) {
      div.textContent = (type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ") + newName;
      div.dataset.name = newName;
      div.appendChild(editBtn);
    }
  };
  div.appendChild(editBtn);

  return div;
}

function addWorker() {
  const input = document.getElementById("workerName");
  const name = input.value.trim();
  if (!name) return;
  workers.push(name);
  document.getElementById("workersList").appendChild(makeChip("ouvrier", name));
  input.value="";
}

function addTask() {
  const input = document.getElementById("taskName");
  const name = input.value.trim();
  if (!name) return;
  tasks.push(name);
  document.getElementById("tasksList").appendChild(makeChip("tache", name));
  input.value="";
}

function addSite() {
  const titleFr = document.getElementById("siteTitleFr").value.trim();
  const addressFr = document.getElementById("siteAddressFr").value.trim();
  const start = document.getElementById("siteStart").value.trim();
  const photo = document.getElementById("sitePhoto").value.trim();

  if (!titleFr || !addressFr) {
    alert("Merci de remplir au minimum Titre (FR) et Adresse (FR).);
    return;
  }

  const id = "site" + Math.random().toString(36).slice(2,9);
  sites.push({
    id,
    title: { fr: titleFr },
    address: { fr: addressFr },
    start,
    photo,
    crew: [],
    status: "ok"
  });

  renderSites();

  document.getElementById("siteTitleFr").value="";
  document.getElementById("siteAddressFr").value="";
  document.getElementById("siteStart").value="";
  document.getElementById("sitePhoto").value="";
}

function renderSites() {
  const grid = document.getElementById("sitesGrid");
  grid.innerHTML="";
  sites.forEach(site=>{
    const card=document.createElement("div");
    card.className="site";
    card.innerHTML=`
      <strong>${site.title.fr}</strong><br>
      üìç ${site.address.fr}<br>
      üïó ${site.start || ""}<br>
      <div class="droppable" data-id="${site.id}"></div>
    `;
    const dropzone=card.querySelector(".droppable");
    dropzone.addEventListener("dragover", e=>{e.preventDefault();dropzone.classList.add("dragover");});
    dropzone.addEventListener("dragleave", ()=>dropzone.classList.remove("dragover"));
    dropzone.addEventListener("drop", e=>{
      e.preventDefault();
      dropzone.classList.remove("dragover");
      const data=JSON.parse(e.dataTransfer.getData("text/plain"));

      // V√©rifier si d√©j√† affect√© ailleurs
      let chantierTrouve = null;
      let villeTrouvee = null;
      sites.forEach(s => {
        if (s.id !== site.id) {
          s.crew.forEach(c => {
            if (c.type === data.type && c.name === data.name) {
              chantierTrouve = s.title.fr;
              villeTrouvee = s.address.fr;
            }
          });
        }
      });

      if (chantierTrouve) {
        alert(`‚ö†Ô∏è Attention, "${data.name}" est d√©j√† affect√© au chantier "${chantierTrouve}" √† "${villeTrouvee}" !`);
        return;
      }

      site.crew.push(data);
      renderSites();
    });

    // üîπ Affichage des ouvriers/t√¢ches avec croix de suppression
    site.crew.forEach((c, idx)=>{
      const span=document.createElement("span");
      span.className="tag";
      span.textContent=(c.type==="ouvrier"?"üë∑ ":"üõ†Ô∏è ")+c.name;

      const removeBtn=document.createElement("button");
      removeBtn.textContent="‚ùå";
      removeBtn.className="removeBtn";
      removeBtn.onclick=()=>{
        site.crew.splice(idx,1);
        renderSites();
      };

      span.appendChild(removeBtn);
      dropzone.appendChild(span);
    });

    // üîπ Bouton √©diter chantier
    const editBtn = document.createElement("button");
    editBtn.textContent = "‚úèÔ∏è √âditer chantier";
    editBtn.onclick = () => {
      const newTitle = prompt("Nouveau titre :", site.title.fr);
      const newAddress = prompt("Nouvelle adresse :", site.address.fr);
      const newStart = prompt("Nouvelle heure :", site.start);
      const newPhoto = prompt("Nouvelle photo :", site.photo);

      if (newTitle) site.title.fr = newTitle;
      if (newAddress) site.address.fr = newAddress;
      if (newStart) site.start = newStart;
      if (newPhoto) site.photo = newPhoto;

      renderSites();
    };
    card.appendChild(editBtn);

    grid.appendChild(card);
  });
}

function exportJSON() {
  const json=JSON.stringify(sites,null,2);
  const blob=new Blob([json],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download = "sites.json";
  a.click();
}

function importJSON() {
  const input=document.createElement("input");
  input.type="file";
  input.accept="application/json";
  input.onchange=()=>{
    const file=input.files[0];
    const reader=new FileReader();
    reader.onload=e=>{
      try {
        const data=JSON.parse(e.target.result);
        if (Array.isArray(data)) {
          sites=data;
          renderSites();
        } else {
          alert("Fichier JSON invalide.");
        }
      } catch {
        alert("Erreur lors de la lecture du fichier JSON.");
      }
    };
    reader.readAsText(file);
  };
  input.click();
}

renderSites();
</script>

</body>
</html>
```