<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Planning du jour</title>
<style>
  body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
  .site { background:#fff; border:1px solid #ccc; border-radius:8px; padding:10px; margin-bottom:15px; }
  .crew { margin-top:8px; }
</style>
</head>
<body>
<h1>Planning du jour</h1>
<div id="planning"></div>

<script>
function afficherPlanning() {
  fetch("planning.json?ts="+Date.now())
    .then(r=>r.json())
    .then(data=>{
      const zone=document.getElementById("planning");
      zone.innerHTML="";
      data.forEach(site=>{
        zone.innerHTML+=`
          <div class="site">
            <strong>${site.title}</strong><br>
            ğŸ“ ${site.address}<br>
            ğŸ•— ${site.start}<br>
            ğŸ‘· ${site.crew.map(c=>(c.type==="ouvrier"?"ğŸ‘· ":"ğŸ› ï¸ ")+c.name).join(" / ")}
          </div>
        `;
      });
    });
}
afficherPlanning();
setInterval(afficherPlanning,60000); // toutes les minutes
</script>
</body>
</html>
